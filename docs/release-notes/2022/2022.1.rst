GROMACS 2022.1 release notes
----------------------------

This version was released on TODO, 2022. These release notes
document the changes that have taken place in GROMACS since the
previous 2022 version, to fix known issues. It also incorporates all
fixes made in version 2021.5 and earlier, which you can find described
in the :ref:`release-notes`.

.. Note to developers!
   Please use """"""" to underline the individual entries for fixed issues in the subfolders,
   otherwise the formatting on the webpage is messed up.
   Also, please use the syntax :issue:`number` to reference issues on GitLab, without the
   a space between the colon and number!

Fixes where mdrun could behave incorrectly
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Fix crash when steering FEP with AWH without PME or with separate PME rank
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

There would be a segfault when deciding whether early PME results are needed.

:issue:`4413`

Fixes for ``gmx`` tools
^^^^^^^^^^^^^^^^^^^^^^^

Add polyproline helix coloring to DSSP maps
"""""""""""""""""""""""""""""""""""""""""""

DSSP-4.0 can detect polyproline type-2 helices, so we now also
have a dark blue-green color entry for this in the generated maps.

:issue:`4410`

Fixes that affect portability
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Miscellaneous
^^^^^^^^^^^^^

Workaround for nested MPI-aware code
""""""""""""""""""""""""""""""""""""

:py:mod:`gmxapi` scripts containing `gmxapi.commandline_operation` tasks could be unusable if a task
executable automatically detects MPI resources and the script is invoked with an MPI launcher.

The workaround is to increase the isolation of the task environment from the parent process by explicitly
setting the task environment variables.
This is now possible with a new *env* key word argument to :py:func:`~gmxapi.commandline_operation`,
which is simply passed along to `subprocess.run`.

:issue:`4421`
